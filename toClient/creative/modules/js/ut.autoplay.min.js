/* ut.autoplay v. 0.2.4*/if(function(a){"use strict";function b(a){switch(typeof a){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===a?"null":"object"}}function c(a){return Object.prototype.toString.call(a).replace(/^\[object *|\]$/g,"")}function d(a){return"function"==typeof a}function e(a){if(null===a||a===D)throw TypeError();return Object(a)}function f(a){return a>>0}function g(a){return a>>>0}function h(a){function b(b){Object.defineProperty(a,b,{get:function(){return a._getter(b)},set:function(c){a._setter(b,c)},enumerable:!0,configurable:!1})}if(a.length>E)throw RangeError("Array too large for polyfill");var c;for(c=0;c<a.length;c+=1)b(c)}function i(a,b){var c=32-b;return a<<c>>c}function j(a,b){var c=32-b;return a<<c>>>c}function k(a){return[255&a]}function l(a){return i(a[0],8)}function m(a){return[255&a]}function n(a){return j(a[0],8)}function o(a){return a=M(Number(a)),[0>a?0:a>255?255:255&a]}function p(a){return[a>>8&255,255&a]}function q(a){return i(a[0]<<8|a[1],16)}function r(a){return[a>>8&255,255&a]}function s(a){return j(a[0]<<8|a[1],16)}function t(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function u(a){return i(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function v(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function w(a){return j(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function x(a,b,c){function d(a){var b=H(a),c=a-b;return.5>c?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,i,j,k,l=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=L(2,c-1),e=0):1/0===a||a===-1/0?(f=(1<<b)-1,g=0,e=0>a?1:0):0===a?(f=0,g=0,e=1/a===-1/0?1:0):(e=0>a,a=G(a),a>=L(2,1-l)?(f=K(H(I(a)/F),1023),g=d(a/L(2,f)*L(2,c)),g/L(2,c)>=2&&(f+=1,g=1),f>l?(f=(1<<b)-1,g=0):(f+=l,g-=L(2,c))):(f=0,g=d(a/L(2,1-l-c)))),i=[],h=c;h;h-=1)i.push(g%2?1:0),g=H(g/2);for(h=b;h;h-=1)i.push(f%2?1:0),f=H(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.substring(0,8),2)),j=j.substring(8);return k}function y(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?0/0:1/0*i:j>0?i*L(2,j-h)*(1+k/L(2,c)):0!==k?i*L(2,-(h-1))*(k/L(2,c)):0>i?-0:0}function z(a){return y(a,11,52)}function A(a){return x(a,11,52)}function B(a){return y(a,8,23)}function C(a){return x(a,8,23)}var D=void 0,E=1e5,F=Math.LN2,G=Math.abs,H=Math.floor,I=Math.log,J=Math.max,K=Math.min,L=Math.pow,M=Math.round;!function(){var a=Object.defineProperty,b=!function(){try{return Object.defineProperty({},"x",{})}catch(a){return!1}}();(!a||b)&&(Object.defineProperty=function(b,c,d){if(a)try{return a(b,c,d)}catch(e){}if(b!==Object(b))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in d&&Object.prototype.__defineGetter__.call(b,c,d.get),Object.prototype.__defineSetter__&&"set"in d&&Object.prototype.__defineSetter__.call(b,c,d.set),"value"in d&&(b[c]=d.value),b})}(),function(){function i(a){if(a=f(a),0>a)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:a}),Object.defineProperty(this,"_bytes",{value:Array(a)});for(var b=0;a>b;b+=1)this._bytes[b]=0}function j(){if(!arguments.length||"object"!=typeof arguments[0])return function(a){if(a=f(a),0>a)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:a}),Object.defineProperty(this,"byteLength",{value:a*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new i(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&arguments[0]instanceof j)return function(a){if(this.constructor!==a.constructor)throw TypeError();var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1)this._setter(c,a._getter(c))}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&!(arguments[0]instanceof j)&&!(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a){var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1){var d=a[c];this._setter(c,Number(d))}}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a,b,c){if(b=g(b),b>a.byteLength)throw RangeError("byteOffset out of range");if(b%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(c===D){var d=a.byteLength-b;if(d%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");c=d/this.BYTES_PER_ELEMENT}else c=g(c),d=c*this.BYTES_PER_ELEMENT;if(b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b}),Object.defineProperty(this,"length",{value:c})}.apply(this,arguments);throw TypeError()}function x(a,b,c){var d=function(){Object.defineProperty(this,"constructor",{value:d}),j.apply(this,arguments),h(this)};"__proto__"in d?d.__proto__=j:(d.from=j.from,d.of=j.of),d.BYTES_PER_ELEMENT=a;var e=function(){};return e.prototype=y,d.prototype=new e,Object.defineProperty(d.prototype,"BYTES_PER_ELEMENT",{value:a}),Object.defineProperty(d.prototype,"_pack",{value:b}),Object.defineProperty(d.prototype,"_unpack",{value:c}),d}a.ArrayBuffer=a.ArrayBuffer||i,Object.defineProperty(j,"from",{value:function(a){return new this(a)}}),Object.defineProperty(j,"of",{value:function(){return new this(arguments)}});var y={};j.prototype=y,Object.defineProperty(j.prototype,"_getter",{value:function(a){if(arguments.length<1)throw SyntaxError("Not enough arguments");if(a=g(a),a>=this.length)return D;var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)}}),Object.defineProperty(j.prototype,"get",{value:j.prototype._getter}),Object.defineProperty(j.prototype,"_setter",{value:function(a,b){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(a=g(a),!(a>=this.length)){var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]}}}),Object.defineProperty(j.prototype,"constructor",{value:j}),Object.defineProperty(j.prototype,"copyWithin",{value:function(a,b){var c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(a);j=0>k?J(i+k,0):K(k,i);var l,m=f(b);l=0>m?J(i+m,0):K(m,i);var n;n=c===D?i:f(c);var o;o=0>n?J(i+n,0):K(n,i);var p,q=K(o-l,i-j);for(j>l&&l+q>j?(p=-1,l=l+q-1,j=j+q-1):p=1;q>0;)d._setter(j,d._getter(l)),l+=p,j+=p,q-=1;return d}}),Object.defineProperty(j.prototype,"every",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)if(!a.call(e,b._getter(f),f,b))return!1;return!0}}),Object.defineProperty(j.prototype,"fill",{value:function(a){var b=arguments[1],c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(b);j=0>k?J(i+k,0):K(k,i);var l;l=c===D?i:f(c);var m;for(m=0>l?J(i+l,0):K(l,i);m>j;)d._setter(j,a),j+=1;return d}}),Object.defineProperty(j.prototype,"filter",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=[],f=arguments[1],h=0;c>h;h++){var i=b._getter(h);a.call(f,i,h,b)&&e.push(i)}return new this.constructor(e)}}),Object.defineProperty(j.prototype,"find",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;f>i;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return j;++i}return D}}),Object.defineProperty(j.prototype,"findIndex",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;f>i;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return i;++i}return-1}}),Object.defineProperty(j.prototype,"forEach",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)a.call(e,b._getter(f),f,b)}}),Object.defineProperty(j.prototype,"indexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*H(G(d)))),d>=c)return-1;for(var e=d>=0?d:J(c-G(d),0);c>e;e++)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"join",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;c>e;++e)d[e]=b._getter(e);return d.join(a===D?",":a)}}),Object.defineProperty(j.prototype,"lastIndexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*H(G(d))));for(var e=d>=0?K(d,c-1):c-G(d);e>=0;e--)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"map",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();var e=[];e.length=c;for(var f=arguments[1],h=0;c>h;h++)e[h]=a.call(f,b._getter(h),h,b);return new this.constructor(e)}}),Object.defineProperty(j.prototype,"reduce",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=0;for(e=arguments.length>=2?arguments[1]:b._getter(f++);c>f;)e=a.call(D,e,b._getter(f),f,b),f++;return e}}),Object.defineProperty(j.prototype,"reduceRight",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=c-1;for(e=arguments.length>=2?arguments[1]:b._getter(f--);f>=0;)e=a.call(D,e,b._getter(f),f,b),f--;return e}}),Object.defineProperty(j.prototype,"reverse",{value:function(){if(this===D||null===this)throw TypeError();for(var a=Object(this),b=g(a.length),c=H(b/2),d=0,e=b-1;c>d;++d,--e){var f=a._getter(d);a._setter(d,a._getter(e)),a._setter(e,f)}return a}}),Object.defineProperty(j.prototype,"set",{value:function(){if(arguments.length<1)throw SyntaxError("Not enough arguments");var a,b,c,d,e,f,h,i,j,k;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(a=arguments[0],c=g(arguments[1]),c+a.length>this.length)throw RangeError("Offset plus length of array is out of range");if(i=this.byteOffset+c*this.BYTES_PER_ELEMENT,j=a.length*this.BYTES_PER_ELEMENT,a.buffer===this.buffer){for(k=[],e=0,f=a.byteOffset;j>e;e+=1,f+=1)k[e]=a.buffer._bytes[f];for(e=0,h=i;j>e;e+=1,h+=1)this.buffer._bytes[h]=k[e]}else for(e=0,f=a.byteOffset,h=i;j>e;e+=1,f+=1,h+=1)this.buffer._bytes[h]=a.buffer._bytes[f]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw TypeError("Unexpected argument type(s)");if(b=arguments[0],d=g(b.length),c=g(arguments[1]),c+d>this.length)throw RangeError("Offset plus length of array is out of range");for(e=0;d>e;e+=1)f=b[e],this._setter(c+e,Number(f))}}}),Object.defineProperty(j.prototype,"slice",{value:function(a,b){for(var c=e(this),d=c.length,h=g(d),i=f(a),j=0>i?J(h+i,0):K(i,h),k=b===D?h:f(b),l=0>k?J(h+k,0):K(k,h),m=l-j,n=c.constructor,o=new n(m),p=0;l>j;){var q=c._getter(j);o._setter(p,q),++j,++p}return o}}),Object.defineProperty(j.prototype,"some",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)if(a.call(e,b._getter(f),f,b))return!0;return!1}}),Object.defineProperty(j.prototype,"sort",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;c>e;++e)d[e]=b._getter(e);for(a?d.sort(a):d.sort(),e=0;c>e;++e)b._setter(e,d[e]);return b}}),Object.defineProperty(j.prototype,"subarray",{value:function(a,b){function c(a,b,c){return b>a?b:a>c?c:a}a=f(a),b=f(b),arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),0>a&&(a=this.length+a),0>b&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return 0>d&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)}});var E=x(1,k,l),F=x(1,m,n),I=x(1,o,n),L=x(2,p,q),M=x(2,r,s),N=x(4,t,u),O=x(4,v,w),P=x(4,C,B),Q=x(8,A,z);a.Int8Array=a.Int8Array||E,a.Uint8Array=a.Uint8Array||F,a.Uint8ClampedArray=a.Uint8ClampedArray||I,a.Int16Array=a.Int16Array||L,a.Uint16Array=a.Uint16Array||M,a.Int32Array=a.Int32Array||N,a.Uint32Array=a.Uint32Array||O,a.Float32Array=a.Float32Array||P,a.Float64Array=a.Float64Array||Q}(),function(){function b(a,b){return d(a.get)?a.get(b):a[b]}function e(a,b,d){if(!(a instanceof ArrayBuffer||"ArrayBuffer"===c(a)))throw TypeError();if(b=g(b),b>a.byteLength)throw RangeError("byteOffset out of range");if(d=d===D?a.byteLength-b:g(d),b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b})}function f(a){return function(c,d){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");c+=this.byteOffset;for(var e=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),f=[],h=0;h<a.BYTES_PER_ELEMENT;h+=1)f.push(b(e,h));return Boolean(d)===Boolean(i)&&f.reverse(),b(new a(new Uint8Array(f).buffer),0)}}function h(a){return function(c,d,e){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var f,h,j=new a([d]),k=new Uint8Array(j.buffer),l=[];for(f=0;f<a.BYTES_PER_ELEMENT;f+=1)l.push(b(k,f));Boolean(e)===Boolean(i)&&l.reverse(),h=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),h.set(l)}}var i=function(){var a=new Uint16Array([4660]),c=new Uint8Array(a.buffer);return 18===b(c,0)}();Object.defineProperty(e.prototype,"getUint8",{value:f(Uint8Array)}),Object.defineProperty(e.prototype,"getInt8",{value:f(Int8Array)}),Object.defineProperty(e.prototype,"getUint16",{value:f(Uint16Array)}),Object.defineProperty(e.prototype,"getInt16",{value:f(Int16Array)}),Object.defineProperty(e.prototype,"getUint32",{value:f(Uint32Array)}),Object.defineProperty(e.prototype,"getInt32",{value:f(Int32Array)}),Object.defineProperty(e.prototype,"getFloat32",{value:f(Float32Array)}),Object.defineProperty(e.prototype,"getFloat64",{value:f(Float64Array)}),Object.defineProperty(e.prototype,"setUint8",{value:h(Uint8Array)}),Object.defineProperty(e.prototype,"setInt8",{value:h(Int8Array)}),Object.defineProperty(e.prototype,"setUint16",{value:h(Uint16Array)}),Object.defineProperty(e.prototype,"setInt16",{value:h(Int16Array)}),Object.defineProperty(e.prototype,"setUint32",{value:h(Uint32Array)}),Object.defineProperty(e.prototype,"setInt32",{value:h(Int32Array)}),Object.defineProperty(e.prototype,"setFloat32",{value:h(Float32Array)}),Object.defineProperty(e.prototype,"setFloat64",{value:h(Float64Array)}),a.DataView=a.DataView||e}()}(this),window.matchMedia||(window.matchMedia=function(){"use strict";var a=window.styleMedia||window.media;if(!a){var b=document.createElement("style"),c=document.getElementsByTagName("script")[0],d=null;b.type="text/css",b.id="matchmediajs-test",c.parentNode.insertBefore(b,c),d="getComputedStyle"in window&&window.getComputedStyle(b,null)||b.currentStyle,a={matchMedium:function(a){var c="@media "+a+"{ #matchmediajs-test { width: 1px; } }";return b.styleSheet?b.styleSheet.cssText=c:b.textContent=c,"1px"===d.width}}}return function(b){return{matches:a.matchMedium(b||"all"),media:b||"all"}}}()),function(){window.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(a){"function"==typeof a&&this.visibleCallbacks.push(a)},onHidden:function(a){"function"==typeof a&&this.hiddenCallbacks.push(a)},getPrefix:function(){if(!this.cachedPrefix)for(var a=0;b=this.prefixes[a++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(a){"function"==typeof a&&this.genericCallbacks.push(a);var b=this.genericCallbacks.length;if(b)if(this.cachedPrefix)for(;b--;)this.genericCallbacks[b].call(this,this.visibilityState());else for(;b--;)this.genericCallbacks[b].call(this,arguments[0])},isSupported:function(){return this._getPropName(2)in this.q},_getPropName:function(a){return""==this.cachedPrefix?this.props[a].substring(0,1).toLowerCase()+this.props[a].substring(1):this.cachedPrefix+this.props[a]},_getProp:function(a){return this.q[this._getPropName(a)]},_execute:function(a){if(a){this._callbacks=1==a?this.visibleCallbacks:this.hiddenCallbacks;for(var b=this._callbacks.length;b--;)this._callbacks[b]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(a){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init()}(),function(a){"use strict";var b=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}(),c=a.jsmpeg=function(a,b){b=b||{},this.benchmark=!!b.benchmark,this.canvas=b.canvas||document.createElement("canvas"),this.autoplay=!!b.autoplay,this.loop=!!b.loop,this.onframe=b.onframe||null,this.externalLoadCallback=b.onload||null,this.externalDecodeCallback=b.ondecodeframe||null,this.externalFinishedCallback=b.onfinished||null,this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),this.fillArray(this.zeroBlockData,0),!b.forceCanvas2D&&this.initWebGL()?this.renderFrame=this.renderFrameGL:(this.canvasContext=this.canvas.getContext("2d"),this.renderFrame=this.renderFrame2D),a instanceof WebSocket?(this.client=a,this.client.onopen=this.initSocketClient.bind(this)):this.load(a)};c.prototype.waitForIntraFrame=!0,c.prototype.socketBufferSize=524288,c.prototype.onlostconnection=null,c.prototype.initSocketClient=function(){this.buffer=new G(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer=new G(new ArrayBuffer(this.socketBufferSize)),this.nextPictureBuffer.writePos=0,this.nextPictureBuffer.chunkBegin=0,this.nextPictureBuffer.lastWriteBeforeWrap=0,this.client.binaryType="arraybuffer",this.client.onmessage=this.receiveSocketMessage.bind(this)},c.prototype.decodeSocketHeader=function(a){a[0]==d.charCodeAt(0)&&a[1]==d.charCodeAt(1)&&a[2]==d.charCodeAt(2)&&a[3]==d.charCodeAt(3)&&(this.width=256*a[4]+a[5],this.height=256*a[6]+a[7],this.initBuffers())},c.prototype.receiveSocketMessage=function(a){var c=new Uint8Array(a.data);this.sequenceStarted||this.decodeSocketHeader(c);var d=this.buffer,f=this.nextPictureBuffer;f.writePos+c.length>f.length&&(f.lastWriteBeforeWrap=f.writePos,f.writePos=0,f.index=0),f.bytes.set(c,f.writePos),f.writePos+=c.length;for(var g=0;;){if(g=f.findNextMPEGStartCode(),g==G.NOT_FOUND||f.index>>3>f.writePos)return void(f.index=Math.max(f.writePos-3,0)<<3);if(g==z)break}if(this.waitForIntraFrame)return f.advance(10),void(f.getBits(3)==t&&(this.waitForIntraFrame=!1,f.chunkBegin=f.index-13>>3));this.currentPictureDecoded||this.decodePicture(e);var h=f.index>>3;if(h>f.chunkBegin)d.bytes.set(f.bytes.subarray(f.chunkBegin,h)),d.writePos=h-f.chunkBegin;else{d.bytes.set(f.bytes.subarray(f.chunkBegin,f.lastWriteBeforeWrap));var i=f.lastWriteBeforeWrap-f.chunkBegin;d.bytes.set(f.bytes.subarray(0,h),i),d.writePos=h+i}d.index=0,f.chunkBegin=h,this.currentPictureDecoded=!1,b(this.scheduleDecoding.bind(this),this.canvas)},c.prototype.scheduleDecoding=function(){this.decodePicture(),this.currentPictureDecoded=!0},c.prototype.isRecording=!1,c.prototype.recorderWaitForIntraFrame=!1,c.prototype.recordedFrames=0,c.prototype.recordedSize=0,c.prototype.didStartRecordingCallback=null,c.prototype.recordBuffers=[],c.prototype.canRecord=function(){return this.client&&this.client.readyState==this.client.OPEN},c.prototype.startRecording=function(a){if(this.canRecord()){this.discardRecordBuffers(),this.isRecording=!0,this.recorderWaitForIntraFrame=!0,this.didStartRecordingCallback=a||null,this.recordedFrames=0,this.recordedSize=0;var b=this.width>>4,c=(15&this.width)<<4|this.height>>8,d=255&this.height;this.recordBuffers.push(new Uint8Array([0,0,1,179,b,c,d,19,255,255,225,88,0,0,1,184,0,8,0,0,0,0,1,0]))}},c.prototype.recordFrameFromCurrentBuffer=function(){if(this.isRecording){if(this.recorderWaitForIntraFrame){if(this.pictureCodingType!=t)return;this.recorderWaitForIntraFrame=!1,this.didStartRecordingCallback&&this.didStartRecordingCallback(this)}this.recordedFrames++,this.recordedSize+=this.buffer.writePos,this.recordBuffers.push(new Uint8Array(this.buffer.bytes.subarray(0,this.buffer.writePos)))}},c.prototype.discardRecordBuffers=function(){this.recordBuffers=[],this.recordedFrames=0},c.prototype.stopRecording=function(){var a=new Blob(this.recordBuffers,{type:"video/mpeg"});return this.discardRecordBuffers(),this.isRecording=!1,a},c.prototype.load=function(a){this.url=a;var b=new XMLHttpRequest,c=this;b.onreadystatechange=function(){b.readyState==b.DONE&&200==b.status&&c.loadCallback(b.response)},b.onprogress=this.gl?this.updateLoaderGL.bind(this):this.updateLoader2D.bind(this),b.open("GET",a),b.responseType="arraybuffer",b.send()},c.prototype.updateLoader2D=function(a){var b=a.loaded/a.total,c=this.canvas.width,d=this.canvas.height,e=this.canvasContext;e.fillStyle="#222",e.fillRect(0,0,c,d),e.fillStyle="#fff",e.fillRect(0,d-d*b,c,d*b)},c.prototype.updateLoaderGL=function(a){var b=this.gl;b.uniform1f(b.getUniformLocation(this.loadingProgram,"loaded"),a.loaded/a.total),b.drawArrays(b.TRIANGLE_STRIP,0,4)},c.prototype.loadCallback=function(a){for(this.buffer=new G(a),this.findStartCode(w),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader(),this.nextFrame(),this.intraFrames=[];;){var b=this.buffer.findNextMPEGStartCode();if(b==z)this.buffer.advance(10),this.buffer.getBits(3)==t&&this.intraFrames.push(this.buffer.index-13);else if(b==G.NOT_FOUND)break}this.buffer.index=0,this.autoplay&&this.play(),this.externalLoadCallback&&this.externalLoadCallback(this)},c.prototype.isPlaying=function(){return this.playing},c.prototype.play=function(){this.playing||(this.targetTime=this.now(),this.playing=!0,this.scheduleNextFrame())},c.prototype.pause=function(){this.playing=!1},c.prototype.stop=function(){this.buffer&&(this.buffer.index=this.firstSequenceHeader),this.currentframe=0,this.playing=!1,this.client&&(this.client.close(),this.client=null)},c.prototype.readCode=function(a){var b=0;do b=a[b+this.buffer.getBits(1)];while(b>=0&&0!=a[b]);return a[b+2]},c.prototype.findStartCode=function(a){for(var b=0;;)if(b=this.buffer.findNextMPEGStartCode(),b==a||b==G.NOT_FOUND)return b;return G.NOT_FOUND},c.prototype.fillArray=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c]=b},c.prototype.cachedFrameCount=0,c.prototype.calculateFrameCount=function(){if(!this.buffer||this.cachedFrameCount)return this.cachedFrameCount;var a=this.buffer.index,b=0;for(this.buffer.index=0;this.findStartCode(z)!==G.NOT_FOUND;)b++;return this.buffer.index=a,this.cachedFrameCount=b,b},c.prototype.calculateDuration=function(){return this.calculateFrameCount()*(1/this.pictureRate)},c.prototype.pictureRate=30,c.prototype.lateTime=0,c.prototype.firstSequenceHeader=0,c.prototype.targetTime=0,c.prototype.benchmark=!1,c.prototype.benchFrame=0,c.prototype.benchDecodeTimes=0,c.prototype.benchAvgFrameTime=0,c.prototype.now=function(){return a.performance?a.performance.now():Date.now()},c.prototype.nextFrame=function(){if(this.buffer)for(var a=this.now();;){var b=this.buffer.findNextMPEGStartCode();if(b==w)this.decodeSequenceHeader();else{if(b==z)return this.playing&&this.scheduleNextFrame(),this.decodePicture(),this.benchDecodeTimes+=this.now()-a,this.canvas;if(b==G.NOT_FOUND)return this.stop(),this.externalFinishedCallback&&this.externalFinishedCallback(this),this.loop&&this.sequenceStarted&&this.play(),null}}},c.prototype.scheduleNextFrame=function(){this.lateTime=this.now()-this.targetTime;var b=Math.max(0,1e3/this.pictureRate-this.lateTime);this.targetTime=this.now()+b,this.currentframe||(this.currentframe=0),this.currentframe++,"function"==typeof this.onframe&&this.onframe(this.currentframe),this.benchmark?(this.benchFrame++,this.benchFrame>=120&&(this.benchAvgFrameTime=this.benchDecodeTimes/this.benchFrame,this.benchFrame=0,this.benchDecodeTimes=0,a.console&&console.log("Average time per frame:",this.benchAvgFrameTime,"ms")),setTimeout(this.nextFrame.bind(this),0)):18>b?this.scheduleAnimation():setTimeout(this.scheduleAnimation.bind(this),b)},c.prototype.scheduleAnimation=function(){b(this.nextFrame.bind(this),this.canvas)},c.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=f[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers(),this.buffer.getBits(1)){for(var a=0;64>a;a++)this.customIntraQuantMatrix[g[a]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var a=0;64>a;a++)this.customNonIntraQuantMatrix[g[a]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},c.prototype.initBuffers=function(){if(this.intraQuantMatrix=h,this.nonIntraQuantMatrix=i,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,!this.sequenceStarted){this.sequenceStarted=!0;var b=a.Uint8ClampedArray||a.Uint8Array;a.Uint8ClampedArray||(this.copyBlockToDestination=this.copyBlockToDestinationClamp,this.addBlockToDestination=this.addBlockToDestinationClamp),this.currentY=new b(this.codedSize),this.currentY32=new Uint32Array(this.currentY.buffer),this.currentCr=new b(this.codedSize>>2),this.currentCr32=new Uint32Array(this.currentCr.buffer),this.currentCb=new b(this.codedSize>>2),this.currentCb32=new Uint32Array(this.currentCb.buffer),this.forwardY=new b(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new b(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new b(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height,this.gl?(this.gl.useProgram(this.program),this.gl.viewport(0,0,this.width,this.height),this.currentYUint8=new Uint8Array(this.currentY.buffer),this.currentCrUint8=new Uint8Array(this.currentCr.buffer),this.currentCbUint8=new Uint8Array(this.currentCb.buffer)):(this.currentRGBA=this.canvasContext.getImageData(0,0,this.width,this.height),this.fillArray(this.currentRGBA.data,255))}},c.prototype.currentY=null,c.prototype.currentCr=null,c.prototype.currentCb=null,c.prototype.currentRGBA=null,c.prototype.pictureCodingType=0,c.prototype.forwardY=null,c.prototype.forwardCr=null,c.prototype.forwardCb=null,c.prototype.fullPelForward=!1,c.prototype.forwardFCode=0,c.prototype.forwardRSize=0,c.prototype.forwardF=0,c.prototype.decodePicture=function(a){if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=v)){if(this.pictureCodingType==u){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0==this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var b=0;do b=this.buffer.findNextMPEGStartCode();while(b==A||b==B);for(;b>=x&&y>=b;)this.decodeSlice(255&b),b=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),this.recordFrameFromCurrentBuffer(),a!=e&&(this.renderFrame(),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType==t||this.pictureCodingType==u){var c=this.forwardY,d=this.forwardY32,f=this.forwardCr,g=this.forwardCr32,h=this.forwardCb,i=this.forwardCb32;this.forwardY=this.currentY,this.forwardY32=this.currentY32,this.forwardCr=this.currentCr,this.forwardCr32=this.currentCr32,this.forwardCb=this.currentCb,this.forwardCb32=this.currentCb32,this.currentY=c,this.currentY32=d,this.currentCr=f,this.currentCr32=g,this.currentCb=h,this.currentCb32=i}}},c.prototype.YCbCrToRGBA=function(){for(var a,b,c,d,e,f=this.currentY,g=this.currentCb,h=this.currentCr,i=this.currentRGBA.data,j=0,k=this.codedWidth,l=this.codedWidth+(this.codedWidth-this.width),m=0,n=this.halfWidth-(this.width>>1),o=0,p=4*this.width,q=4*this.width,r=this.width>>1,s=this.height>>1,t=0;s>t;t++){for(var u=0;r>u;u++){a=g[m],b=h[m],m++,c=b+(103*b>>8)-179,d=(88*a>>8)-44+(183*b>>8)-91,e=a+(198*a>>8)-227;var v=f[j++],w=f[j++];i[o]=v+c,i[o+1]=v-d,i[o+2]=v+e,i[o+4]=w+c,i[o+5]=w-d,i[o+6]=w+e,o+=8;var x=f[k++],y=f[k++];i[p]=x+c,i[p+1]=x-d,i[p+2]=x+e,i[p+4]=y+c,i[p+5]=y-d,i[p+6]=y+e,p+=8}j+=l,k+=l,o+=q,p+=q,m+=n}},c.prototype.renderFrame2D=function(){this.YCbCrToRGBA(),this.canvasContext.putImageData(this.currentRGBA,0,0)},c.prototype.gl=null,c.prototype.program=null,c.prototype.YTexture=null,c.prototype.CBTexture=null,c.prototype.CRTexture=null,c.prototype.createTexture=function(a,b){var c=this.gl,d=c.createTexture();return c.bindTexture(c.TEXTURE_2D,d),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.uniform1i(c.getUniformLocation(this.program,b),a),d},c.prototype.compileShader=function(a,b){var c=this.gl,d=c.createShader(a);if(c.shaderSource(d,b),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS))throw new Error(c.getShaderInfoLog(d));return d},c.prototype.initWebGL=function(){try{var a=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(b){return!1}if(!a)return!1;if(this.buffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),a.STATIC_DRAW),this.program=a.createProgram(),a.attachShader(this.program,this.compileShader(a.VERTEX_SHADER,E)),a.attachShader(this.program,this.compileShader(a.FRAGMENT_SHADER,C)),a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error(a.getProgramInfoLog(this.program));
a.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var c=a.getAttribLocation(this.program,"vertex");return a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),this.loadingProgram=a.createProgram(),a.attachShader(this.loadingProgram,this.compileShader(a.VERTEX_SHADER,E)),a.attachShader(this.loadingProgram,this.compileShader(a.FRAGMENT_SHADER,D)),a.linkProgram(this.loadingProgram),a.useProgram(this.loadingProgram),c=a.getAttribLocation(this.loadingProgram,"vertex"),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),!0},c.prototype.renderFrameGL=function(){var a=this.gl;a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.YTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.codedWidth,this.height,0,a.LUMINANCE,a.UNSIGNED_BYTE,this.currentYUint8),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.CBTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.halfWidth,this.height/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,this.currentCrUint8),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,this.CRTexture),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,this.halfWidth,this.height/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,this.currentCbUint8),a.drawArrays(a.TRIANGLE_STRIP,0,4)},c.prototype.quantizerScale=0,c.prototype.sliceBegin=!1,c.prototype.decodeSlice=function(a){for(this.sliceBegin=!0,this.macroblockAddress=(a-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},c.prototype.macroblockAddress=0,c.prototype.mbRow=0,c.prototype.mbCol=0,c.prototype.macroblockType=0,c.prototype.macroblockIntra=!1,c.prototype.macroblockMotFw=!1,c.prototype.motionFwH=0,c.prototype.motionFwV=0,c.prototype.motionFwHPrev=0,c.prototype.motionFwVPrev=0,c.prototype.decodeMacroblock=function(){for(var a=0,b=this.readCode(k);34==b;)b=this.readCode(k);for(;35==b;)a+=33,b=this.readCode(k);if(a+=b,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=a;else{if(this.macroblockAddress+a>=this.mbSize)return;for(a>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType==u&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));a>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),a--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(F[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var c=0!=(2&this.macroblockType)?this.readCode(o):this.macroblockIntra?63:0,d=0,e=32;6>d;d++)0!=(c&e)&&this.decodeBlock(d),e>>=1},c.prototype.decodeMotionVectors=function(){var a,b,c=0;this.macroblockMotFw?(a=this.readCode(p),0!=a&&1!=this.forwardF?(c=this.buffer.getBits(this.forwardRSize),b=(Math.abs(a)-1<<this.forwardRSize)+c+1,0>a&&(b=-b)):b=a,this.motionFwHPrev+=b,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),a=this.readCode(p),0!=a&&1!=this.forwardF?(c=this.buffer.getBits(this.forwardRSize),b=(Math.abs(a)-1<<this.forwardRSize)+c+1,0>a&&(b=-b)):b=a,this.motionFwVPrev+=b,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType==u&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},c.prototype.copyMacroblock=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o=this.currentY32,p=this.currentCb32,q=this.currentCr32;f=this.codedWidth,g=f-16,h=a>>1,i=b>>1,j=1==(1&a),k=1==(1&b),l=((this.mbRow<<4)+i)*f+(this.mbCol<<4)+h,m=this.mbRow*f+this.mbCol<<2,n=m+(f<<2);var r,s,t;if(j)if(k)for(;n>m;){r=c[l]+c[l+f],l++;for(var u=0;4>u;u++)s=c[l]+c[l+f],l++,t=r+s+2>>2&255,r=c[l]+c[l+f],l++,t|=r+s+2<<6&65280,s=c[l]+c[l+f],l++,t|=r+s+2<<14&16711680,r=c[l]+c[l+f],l++,t|=r+s+2<<22&4278190080,o[m++]=t;m+=g>>2,l+=g-1}else for(;n>m;){r=c[l++];for(var u=0;4>u;u++)s=c[l++],t=r+s+1>>1&255,r=c[l++],t|=r+s+1<<7&65280,s=c[l++],t|=r+s+1<<15&16711680,r=c[l++],t|=r+s+1<<23&4278190080,o[m++]=t;m+=g>>2,l+=g-1}else if(k)for(;n>m;){for(var u=0;4>u;u++)t=c[l]+c[l+f]+1>>1&255,l++,t|=c[l]+c[l+f]+1<<7&65280,l++,t|=c[l]+c[l+f]+1<<15&16711680,l++,t|=c[l]+c[l+f]+1<<23&4278190080,l++,o[m++]=t;m+=g>>2,l+=g}else for(;n>m;){for(var u=0;4>u;u++)t=c[l],l++,t|=c[l]<<8,l++,t|=c[l]<<16,l++,t|=c[l]<<24,l++,o[m++]=t;m+=g>>2,l+=g}f=this.halfWidth,g=f-8,h=a/2>>1,i=b/2>>1,j=1==(a/2&1),k=1==(b/2&1),l=((this.mbRow<<3)+i)*f+(this.mbCol<<3)+h,m=this.mbRow*f+this.mbCol<<1,n=m+(f<<1);var v,w,x,y,z,A;if(j)if(k)for(;n>m;){v=d[l]+d[l+f],y=e[l]+e[l+f],l++;for(var u=0;2>u;u++)w=d[l]+d[l+f],z=e[l]+e[l+f],l++,x=v+w+2>>2&255,A=y+z+2>>2&255,v=d[l]+d[l+f],y=e[l]+e[l+f],l++,x|=v+w+2<<6&65280,A|=y+z+2<<6&65280,w=d[l]+d[l+f],z=e[l]+e[l+f],l++,x|=v+w+2<<14&16711680,A|=y+z+2<<14&16711680,v=d[l]+d[l+f],y=e[l]+e[l+f],l++,x|=v+w+2<<22&4278190080,A|=y+z+2<<22&4278190080,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g-1}else for(;n>m;){v=d[l],y=e[l],l++;for(var u=0;2>u;u++)w=d[l],z=e[l++],x=v+w+1>>1&255,A=y+z+1>>1&255,v=d[l],y=e[l++],x|=v+w+1<<7&65280,A|=y+z+1<<7&65280,w=d[l],z=e[l++],x|=v+w+1<<15&16711680,A|=y+z+1<<15&16711680,v=d[l],y=e[l++],x|=v+w+1<<23&4278190080,A|=y+z+1<<23&4278190080,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g-1}else if(k)for(;n>m;){for(var u=0;2>u;u++)x=d[l]+d[l+f]+1>>1&255,A=e[l]+e[l+f]+1>>1&255,l++,x|=d[l]+d[l+f]+1<<7&65280,A|=e[l]+e[l+f]+1<<7&65280,l++,x|=d[l]+d[l+f]+1<<15&16711680,A|=e[l]+e[l+f]+1<<15&16711680,l++,x|=d[l]+d[l+f]+1<<23&4278190080,A|=e[l]+e[l+f]+1<<23&4278190080,l++,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g}else for(;n>m;){for(var u=0;2>u;u++)x=d[l],A=e[l],l++,x|=d[l]<<8,A|=e[l]<<8,l++,x|=d[l]<<16,A|=e[l]<<16,l++,x|=d[l]<<24,A|=e[l]<<24,l++,q[m]=x,p[m]=A,m++;m+=g>>2,l+=g}},c.prototype.dcPredictorY,c.prototype.dcPredictorCr,c.prototype.dcPredictorCb,c.prototype.blockData=null,c.prototype.decodeBlock=function(a){var b,c=0;if(this.macroblockIntra){var d,e;if(4>a?(d=this.dcPredictorY,e=this.readCode(q)):(d=4==a?this.dcPredictorCr:this.dcPredictorCb,e=this.readCode(r)),e>0){var f=this.buffer.getBits(e);this.blockData[0]=0!=(f&1<<e-1)?d+f:d+(-1<<e|f+1)}else this.blockData[0]=d;4>a?this.dcPredictorY=this.blockData[0]:4==a?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,b=this.intraQuantMatrix,c=1}else b=this.nonIntraQuantMatrix;for(var h=0;;){var i=0,k=this.readCode(s);if(1==k&&c>0&&0==this.buffer.getBits(1))break;65535==k?(i=this.buffer.getBits(6),h=this.buffer.getBits(8),0==h?h=this.buffer.getBits(8):128==h?h=this.buffer.getBits(8)-256:h>128&&(h-=256)):(i=k>>8,h=255&k,this.buffer.getBits(1)&&(h=-h)),c+=i;var l=g[c];c++,h<<=1,this.macroblockIntra||(h+=0>h?-1:1),h=h*this.quantizerScale*b[l]>>4,0==(1&h)&&(h-=h>0?1:-1),h>2047?h=2047:-2048>h&&(h=-2048),this.blockData[l]=h*j[l]}var m,n,o;4>a?(m=this.currentY,o=this.codedWidth-8,n=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&a)&&(n+=8),0!=(2&a)&&(n+=this.codedWidth<<3)):(m=4==a?this.currentCb:this.currentCr,o=(this.codedWidth>>1)-8,n=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1==c?(this.copyValueToDestination(this.blockData[0]+128>>8,m,n,o),this.blockData[0]=0):(this.IDCT(),this.copyBlockToDestination(this.blockData,m,n,o),this.blockData.set(this.zeroBlockData)):1==c?(this.addValueToDestination(this.blockData[0]+128>>8,m,n,o),this.blockData[0]=0):(this.IDCT(),this.addBlockToDestination(this.blockData,m,n,o),this.blockData.set(this.zeroBlockData)),c=0},c.prototype.copyBlockToDestination=function(a,b,c,d){for(var e=a,f=b,g=c,h=0;64>h;h+=8,g+=d+8)f[g+0]=e[h+0],f[g+1]=e[h+1],f[g+2]=e[h+2],f[g+3]=e[h+3],f[g+4]=e[h+4],f[g+5]=e[h+5],f[g+6]=e[h+6],f[g+7]=e[h+7]},c.prototype.addBlockToDestination=function(a,b,c,d){for(var e=a,f=b,g=c,h=0;64>h;h+=8,g+=d+8)f[g+0]+=e[h+0],f[g+1]+=e[h+1],f[g+2]+=e[h+2],f[g+3]+=e[h+3],f[g+4]+=e[h+4],f[g+5]+=e[h+5],f[g+6]+=e[h+6],f[g+7]+=e[h+7]},c.prototype.copyValueToDestination=function(a,b,c,d){for(var e=b,f=c,g=0;64>g;g+=8,f+=d+8)e[f+0]=a,e[f+1]=a,e[f+2]=a,e[f+3]=a,e[f+4]=a,e[f+5]=a,e[f+6]=a,e[f+7]=a},c.prototype.addValueToDestination=function(a,b,c,d){for(var e=b,f=c,g=0;64>g;g+=8,f+=d+8)e[f+0]+=a,e[f+1]+=a,e[f+2]+=a,e[f+3]+=a,e[f+4]+=a,e[f+5]+=a,e[f+6]+=a,e[f+7]+=a},c.prototype.copyBlockToDestinationClamp=function(a,b,c,d){for(var e=0,f=0;8>f;f++){for(var g=0;8>g;g++){var h=a[e++];b[c++]=h>255?255:0>h?0:h}c+=d}},c.prototype.addBlockToDestinationClamp=function(a,b,c,d){for(var e=0,f=0;8>f;f++){for(var g=0;8>g;g++){var h=a[e++]+b[c];b[c++]=h>255?255:0>h?0:h}c+=d}},c.prototype.IDCT=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this.blockData;for(s=0;8>s;++s)a=t[32+s],b=t[16+s]+t[48+s],c=t[40+s]-t[24+s],f=t[8+s]+t[56+s],g=t[24+s]+t[40+s],d=t[8+s]-t[56+s],e=f+g,h=t[0+s],m=(473*d-196*c+128>>8)-e,i=m-(362*(f-g)+128>>8),j=h-a,k=(362*(t[16+s]-t[48+s])+128>>8)-b,l=h+a,n=j+k,o=l+b,p=j-k,q=l-b,r=-i-(473*c+196*d+128>>8),t[0+s]=e+o,t[8+s]=m+n,t[16+s]=p-i,t[24+s]=q-r,t[32+s]=q+r,t[40+s]=i+p,t[48+s]=n-m,t[56+s]=o-e;for(s=0;64>s;s+=8)a=t[4+s],b=t[2+s]+t[6+s],c=t[5+s]-t[3+s],f=t[1+s]+t[7+s],g=t[3+s]+t[5+s],d=t[1+s]-t[7+s],e=f+g,h=t[0+s],m=(473*d-196*c+128>>8)-e,i=m-(362*(f-g)+128>>8),j=h-a,k=(362*(t[2+s]-t[6+s])+128>>8)-b,l=h+a,n=j+k,o=l+b,p=j-k,q=l-b,r=-i-(473*c+196*d+128>>8),t[0+s]=e+o+128>>8,t[1+s]=m+n+128>>8,t[2+s]=p-i+128>>8,t[3+s]=q-r+128>>8,t[4+s]=q+r+128>>8,t[5+s]=i+p+128>>8,t[6+s]=n-m+128>>8,t[7+s]=o-e+128>>8};var d="jsmp",e=1,f=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],g=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),h=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),i=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),j=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),k=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),l=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),m=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),n=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),o=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),p=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),q=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),r=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),s=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),t=1,u=2,v=3,w=179,x=1,y=175,z=0,A=181,B=178,C=["precision highp float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),D=["precision highp float;","uniform float loaded;","varying vec2 texCoord;","void main() {","float c = ceil(loaded-(1.0-texCoord.y));","gl_FragColor = vec4(c,c,c,1);","}"].join("\n"),E=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n"),F=[null,l,m,n],G=function(a){this.bytes=new Uint8Array(a),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};G.NOT_FOUND=-1,G.prototype.findNextMPEGStartCode=function(){for(var a=this.index+7>>3;a<this.writePos;a++)if(0==this.bytes[a]&&0==this.bytes[a+1]&&1==this.bytes[a+2])return this.index=a+4<<3,this.bytes[a+3];return this.index=this.writePos<<3,G.NOT_FOUND},G.prototype.nextBytesAreStartCode=function(){var a=this.index+7>>3;return a>=this.writePos||0==this.bytes[a]&&0==this.bytes[a+1]&&1==this.bytes[a+2]},G.prototype.nextBits=function(a){var b=this.index>>3,c=8-this.index%8;if(c>=a)return this.bytes[b]>>c-a&255>>8-a;var d=(this.index+a)%8,e=this.index+a-1>>3,f=this.bytes[b]&255>>8-c;for(b++;e>b;b++)f<<=8,f|=this.bytes[b];return d>0?(f<<=d,f|=this.bytes[b]>>8-d):(f<<=8,f|=this.bytes[b]),f},G.prototype.getBits=function(a){var b=this.nextBits(a);return this.index+=a,b},G.prototype.advance=function(a){return this.index+=a},G.prototype.rewind=function(a){return this.index-=a}}(window),"function"==typeof window.prepStart)throw"Another incompatible module is in use. Autoplayer will not work.";window.prepStart=function(){};var Autoplay,root;root="undefined"!=typeof window&&null!==window?window:global,root.Autoplay=Autoplay={_utcenv:function(){var a=!1;return window.undertone&&window.undertone.creative&&(a=!0),a},_trackEvent:function(a,b){var c=this,d=c.options.trackingID||b||$(c.elem).attr("id")||"autoplayer";a=c.muted?a:"unmuted"+a,c._utcenv()?undertone.creative.trackEvent("apfs_"+a,d,!0):console.log("trackEvent",a,d),c._triggerEvent(a)},_triggerEvent:function(a,b,c){var d=c||this.elem||document.body,b="array"==typeof b?b:[b];$(d).trigger("autoplay-"+a,b)},init:function(a,b){var c=this;return c.options=$.extend({},c.defaults,a),c.elem=b,c.options.closeOnEnd&&(window.iaConfig?window.iaConfig.autocloseTimePeriod=c.options.closeOnEnd:window.ssConfig?window.ssConfig.autocloseTimePeriod=c.options.closeOnEnd:window.iaConfig={autocloseTimePeriod:c.options.closeOnEnd},$(window).on("interaction",function(){c.options.closeOnEnd=!1}),$(window).on("closead",function(){c.adState="closed",c.unmuteCheck&&(clearTimeout(c.unmuteCheck),c.unmuteCheck=null)}),$(window).on("startad",function(){c.adState="open"})),c.options.force_jsmpeg&&(c.options.spritesheetFallback=!1,c.options.nativeAutoplay=!1),c._detect=c._detect(navigator.userAgent),c.options.nativeAutoplay?c._detectAutoplay(function(a){c.options.nativeAutoplay=a,c.options.spritesheetFallback&&c._shouldFallback(),c._build(c.elem,c.options)}):(c.options.spritesheetFallback&&c._shouldFallback(),c._build(c.elem,c.options)),c},_shouldFallback:function(){var a=this,b=window.innerWidth,c=window.innerHeight,d=window.devicePixelRatio,e=b>c,f=c>=b,g=(2>d||f&&362>b||e&&362>c)&&a._detect.os.android,h=(2>d||f&&320>b||e&&320>c)&&a._detect.os.ios;g||h?(a._sprite_frames_per_row=a.options.sprite_width/a.options.sprite_frame_width,a._sprite_frames_per_col=a.options.sprite_height/a.options.sprite_frame_height,!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=window.performance.now(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),!function(){if("undefined"==typeof window.performance&&(window.performance={}),!window.performance.now){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-a}}}()):a.options.spritesheetFallback=!1},defaults:{autoplay:!0,loop:!1,aspectRatio:"16:9",size:"contain",center:!0,volume:0,prepStart:!0,clickID:!1,nativeAutoplay:!0,spritesheetFallback:!0,sprite_frame_width:320,sprite_frame_height:180,sprite_fps:15,trackingID:!1,closeOnEnd:!1,closeDelay:0},muted:!0,tracking:{},_build:function(a,b){var c=this,d=b||c.options;if(a=a[0]||a,c.container=$('<div class="utap-container utap-size-'+c.options.size+'" />'),$(c.elem).append(c.container),c.options.spritesheetFallback&&!c.options.force_jsmpeg)c.player=$('<div class="utap-sprite" />'),c.container.prepend(c.player),c.options.clickID&&c.player.attr("data-utclickid",c.options.clickID),c._makeAudio();else if(c.options.nativeAutoplay&&!c.options.force_jsmpeg){var e=c.options.autoplay?"autoplay ":"";c.player=$("<video "+e+"muted />"),c.options.previousVolume=c.player[0].volume,c.player[0].volume=d.volume,c.options.clickID&&c.player.attr("data-utclickid",c.options.clickID),c.container.prepend(c.player)}else c.canvas=$('<canvas class="utap-canvas" />'),c.options.clickID&&c.canvas.attr("data-utclickid",c.options.clickID),$(c.container).append(c.canvas),c._makeAudio();c._makeStyles(),c._makeControls();var f=c.progress;d.center&&$(c.elem).addClass("utap-center"),c.options.spritesheetFallback&&!c.options.force_jsmpeg?$('<img src="'+c.options.source_sprite+'" />').one("load",function(){c.sentStart||(c.sentStart=!0,c.options.prepStart&&"undefined"!=typeof undertone&&c._utcenv()&&undertone.creative.sendMessage("start"),c.frames=c.options.sprite_frames,c._onLoadSetup(),d.autoplay&&c.pause())}).each(function(){this.complete&&$(this).load()}):c.options.nativeAutoplay&&!c.options.force_jsmpeg?(c.player.on("canplay",function(){c.sentStart||(c.sentStart=!0,c.options.prepStart&&"undefined"!=typeof undertone&&c._utcenv()&&undertone.creative.sendMessage("start"),c.duration=c.player[0].duration,c.player.on("timeupdate",function(){var a=c.player[0].currentTime;c._checkQuartiles(a),c._onframe(a,c.duration,f),"function"==typeof d.onprogress&&d.onprogress(a,c.duration)}),c.player.on("ended",function(){c._onended()}),c._onLoadSetup())}),c.player.append($('<source src="'+c.options.source_mp4+"\" type='video/mp4'><source src=\""+c.options.source_webm+"\" type='video/webm'>"))):c.player=new jsmpeg(d.source_mpg,{canvas:c.canvas[0],autoplay:d.autoplay,loop:!1,volume:d.volume,onframe:function(a){c._checkQuartiles(a),c._onframe(a,c.frames,f),"function"==typeof d.onprogress&&d.onprogress(c.duration*(a/c.frames),c.duration)},onload:function(a){c.options.prepStart&&"undefined"!=typeof undertone&&c._utcenv()&&undertone.creative.sendMessage("start"),c.frames=a.calculateFrameCount(),c.duration=a.calculateDuration(),c._onLoadSetup()},onfinished:function(){c._onended()}})},_currentFrame:1,_nextFrame:2,_xpos:0,_ypos:0,_spriteloop:function(a){a>1e12&&(a=window.performance.now());var b=this,c=(a-b._currentTime)/1e3,d=Math.floor(b._currentFrame);b._nextFrame+=c*b.options.sprite_fps;var e=Math.floor(b._nextFrame);return e>=b.options.sprite_frames?(b._currentFrame=e=0,cancelAnimationFrame(b._loop),b._loop=void 0,void b._onended()):((1==d||e!=d)&&(b._checkQuartiles(e),b._onframe(e,b.options.sprite_frames,b.progress),b._gotoSpriteFrame(e)),b._loop=requestAnimationFrame(b._spriteloop.bind(b)),void(b._currentTime=a))},_gotoSpriteFrame:function(a){var b=this;b._xpos+=b.options.sprite_frame_width,a>=b.options.sprite_frames?(b._xpos=0,b._ypos=0,b._currentFrame=0):b._xpos+b.options.sprite_frame_width>b.options.sprite_width&&(b._xpos=0,b._ypos+=b.options.sprite_frame_height);var c="-"+b._xpos+"px ",d="-"+b._ypos+"px";b.player[0].style.backgroundPosition=c+d,b._currentFrame=a},_onended:function(){var a=this;a.tracking.trackedFourthQuartile||(a.tracking.trackedFourthQuartile=!0,a._trackEvent("complete")),a.options.loop?(a.pause(),a.replay()):(a.playing=!1,a.playButton.removeClass("icon-pause").addClass("icon-replay"),a.playButton.off("click"),a.playButton.one("click",function(){a.replay()}),!a.options.clickID&&a.canvas?(a.canvas.off("click"),a.canvas.one("click",function(){a.replay()})):a.options.clickID||(a.player.off("click"),a.player.one("click",function(){a.replay()}))),a.options.closeOnEnd&&(a.closeTimeout=setTimeout(function(){a._utcenv()&&"open"==a.adState&&(undertone.creative.sendMessage("closed"),undertone.creative.trackEvent("autoclose","sspg",!0))},a.options.closeDelay)),"function"==typeof a.options.onfinished&&a.options.onfinished(),a._triggerEvent("onfinished")},_onLoadSetup:function(){var a=this;a._handleResizing(),a._handleAutoStateChanges(),a._setupQuartiles(a.options.nativeAutoplay?a.duration:a.frames),a._setupEventListeners(),a._bindPlayToggle(),a.playing=a.options.autoplay&&!a.options.spritesheetFallback?!0:!1,"function"==typeof a.options.onload&&a.options.onload(a.frames,a.duration),a._triggerEvent("onload")},_detect:function(a){var b={},c={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=!!a.match(/\(Macintosh\; Intel /),g=a.match(/(iPad).*OS\s([\d_]+)/),h=a.match(/(iPod)(.*OS\s([\d_]+))?/),i=!g&&a.match(/(iPhone\sOS)\s([\d_]+)/),j=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),k=a.match(/Windows Phone ([\d.]+)/),l=j&&a.match(/TouchPad/),m=a.match(/Kindle\/([\d.]+)/),n=a.match(/Silk\/([\d._]+)/),o=a.match(/(BlackBerry).*Version\/([\d.]+)/),p=a.match(/(BB10).*Version\/([\d.]+)/),q=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),r=a.match(/PlayBook/),s=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),t=a.match(/Firefox\/([\d.]+)/),u=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),v=!s&&a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=v||a.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);return(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),i&&!h&&(b.ios=b.iphone=!0,b.version=i[2].replace(/_/g,".")),g&&(b.ios=b.ipad=!0,b.version=g[2].replace(/_/g,".")),h&&(b.ios=b.ipod=!0,b.version=h[3]?h[3].replace(/_/g,"."):null),k&&(b.wp=!0,b.version=k[1]),j&&(b.webos=!0,b.version=j[2]),l&&(b.touchpad=!0),o&&(b.blackberry=!0,b.version=o[2]),p&&(b.bb10=!0,b.version=p[2]),q&&(b.rimtabletos=!0,b.version=q[2]),r&&(c.playbook=!0),m&&(b.kindle=!0,b.version=m[1]),n&&(c.silk=!0,c.version=n[1]),!n&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),s&&(c.chrome=!0,c.version=s[1]),t&&(c.firefox=!0,c.version=t[1]),u&&(c.ie=!0,c.version=u[1]),w&&(f||b.ios)&&(c.safari=!0,f&&(c.version=w[1])),v&&(c.webview=!0),b.tablet=!!(g||r||e&&!a.match(/Mobile/)||t&&a.match(/Tablet/)||u&&!a.match(/Phone/)&&a.match(/Touch/)),b.phone=!(b.tablet||b.ipod||!(e||i||j||o||p||s&&a.match(/Android/)||s&&a.match(/CriOS\/([\d.]+)/)||t&&a.match(/Mobile/)||u&&a.match(/Touch/))),{os:b,browser:c}},_detectIE:function(){var a,b,c,d,e;return b=!1,d={5.5:"5.5",5.6:"6",5.7:"7",5.8:"8",9:"9",10:"10"},e=new Function("/*@cc_on return @_jscript_version; @*/")(),void 0!==e&&(b=!0,c=d[e]),a={isTheBrowser:b,actualVersion:c}},_detectAutoplay:function(a){var b=this._detectIE(),c=this._detect.browser.chrome&&parseInt(this._detect.browser.version,10)>30&&!this._detect.os.phone&&!this._detect.os.tablet,d=b&&b.isTheBrowser&&parseInt(b.actualVersion,10)>=10;if(isModernFirefox=this._detect.browser.firefox&&parseInt(this._detect.browser.version,10)>25&&!this._detect.os.phone&&!this._detect.os.tablet,d=b&&b.isTheBrowser&&parseInt(b.actualVersion,10)>=10,c||isModernFirefox||d)return void a(!0);var e,f=800,g=document.createElement("video"),h=g.style,i=this._detectFiletype(),j=function(b){clearTimeout(e),$(g).off("playing"),a(b&&"playing"===b.type||0!==g.currentTime),g.parentNode.removeChild(g)};if(!(i&&"autoplay"in g))return void a(!1);h.position="absolute",h.height=0,h.width=0;try{if(i.h264)g.src="http://images.undertone.com/ut/re/modules/autoplay/mp4.mp4";else{if(!i.ogg)return void a(!1);g.src="data:video/ogg;base64,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"
}}catch(k){return console.log(k),void a(!1)}g.setAttribute("autoplay",""),g.style="display:none",$("body").append(g),setTimeout(function(){$(g).one("playing",function(a){j(a)}),e=setTimeout(j,f)},0)},_detectFiletype:function(){var a=document.createElement("video"),b=!1;try{(b=!!a.canPlayType)&&(b=new Boolean(b),b.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),b.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),b.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""),b.vp9=a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,""),b.hls=a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,""))}catch(c){}return b},_setupEventListeners:function(){var a=this;$(a.elem).on("pause play",function(){a.pause()}),$(a.elem).on("unmute",function(){a.unmute()})},_bindPlayToggle:function(){var a=this;a.options.clickID||(a.canvas?a.canvas.on("click",function(){a.pause()}):a.player.on("click",function(){a.pause()})),a.playButton.on("click",function(){a.pause()})},_checkQuartiles:function(a){var b=this;!b.tracking.trackedStart&&1>=a?(b.tracking.trackedStart=!0,b._trackEvent("start")):!b.tracking.trackedFirstQuartile&&a>=b.tracking.firstQuartile?(b.tracking.trackedFirstQuartile=!0,b._trackEvent("firstQuartile")):!b.tracking.trackedSecondQuartile&&a>=b.tracking.secondQuartile?(b.tracking.trackedSecondQuartile=!0,b._trackEvent("midpoint")):!b.tracking.trackedThirdQuartile&&a>=b.tracking.thirdQuartile&&(b.tracking.trackedThirdQuartile=!0,b._trackEvent("thirdQuartile"))},_setupQuartiles:function(a){var b=this,c=Math.round(a/4);b.tracking.firstQuartile=c,b.tracking.secondQuartile=2*c,b.tracking.thirdQuartile=3*c},_makeStyles:function(){var a="<style>";a+="@font-face{",a+='font-family:"ut_videoplayer";',a+='src:url("fonts/ut_videoplayer.eot");',a+='src:url("fonts/ut_videoplayer.eot?#iefix5")format("embedded-opentype"),url("fonts/ut_videoplayer.ttf")format("truetype"),url("fonts/ut_videoplayer.woff")format("woff"),url("fonts/ut_videoplayer.svg#ut_videoplayer")format("svg");',a+="font-weight:normal;",a+="font-style:normal; }",a+='.utap-icon { font-family: "ut_videoplayer"; display: inline-block; color: #FFFFFF; padding: 18px 10px; margin-top: -18px; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; -webkit-font-smoothing: antialiased;}',a+=".utap-controls .utap-control-bar-buttons { cursor: pointer; overflow: hidden; }",a+='.icon-play:before{ content:"\\e601"; } .icon-pause:before{ content:"\\e602"; } .icon-play-toggle:before{ content:"\\e603"; }',a+='.utap-volume-btn { -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; font-size: .9em; float: right; }',a+='.icon-volume-mute:before { content: "\\e605"; }',a+='.icon-volume-high:before { content: "\\e604"; }',a+='.icon-replay:before{ content:"\\e606"; }',a+=".utap-control-bar-buttons:hover { color: #f7e90e; }",a+=".utap-container { position: relative; display: block; margin: auto; }",a+=".utap-container video { background: #000; display: block; }",a+=".utap-size-cover { position: absolute; top: 50%; left: 50% }",a+=".utap-canvas { display: block; margin: auto; max-width: 100%; cursor: pointer; }",a+=".utap-progress-container { overflow: hidden; height: 5px; background: rgba(0,0,0,0.5); width: 100%; position:absolute; bottom: 0; }",a+=".utap-progress { position: absolute; height: 100%; width: 0; left: 0; background: #fff; }",a+=".utap-controls { position: absolute; bottom: 0; right: 0; text-align: left; width: 100%; height: 30px; }",a+=".utap-size-cover .utap-controls { left: 50%; }",this.options.center&&(a+=".utap-center { text-align: center; }",a+=".utap-center:before { content: ''; display: inline-block; height: 100%; vertical-align: middle; margin-right: -0.25em; }",a+=".utap-container { display: inline-block; vertical-align: middle; }"),this.options.spritesheetFallback&&(a+=".utap-sprite { width: 100%; height: 100%; background: url("+this.options.source_sprite+") 0 0 no-repeat; -webkit-transform: translateZ(0); -moz-transform: translateZ(0); transform: translateZ(0);}"),a+="</style>",$(this.elem).append($(a))},_makeAudio:function(){var a=this,b=a.options;(b.source_mp3||b.source_ogg)&&(a.audio=$('<audio preload="auto" />'),a.audio[0].oncanplaythrough=a._audioCan.apply(a),b.source_mp3&&a.audio.append($('<source src="'+b.source_mp3+'" type="audio/mpeg">')),b.source_ogg&&a.audio.append($('<source src="'+b.source_ogg+'" type="audio/ogg">')),$(a.container).append(a.audio))},_getProgressClickPercentage:function(){{var a=this;a.progressContainer}return clickPercent=(event.pageX-a.progressContainer[0].offsetLeft)/a.progressContainer.width()},_handleAutoStateChanges:function(){var a=this;$(window).on("closeAd",function(){a.playing&&a.pause(!1)}),visibly&&visibly.onHidden(function(){a.playing?(a.restartOnVisibly=!0,a.pause(!1),visibly.onVisible(function(){a.restartOnVisibly&&(a.options.spritesheetFallback?(a._xpos=0,a._ypos=0,a._currentFrame=1,a._nextFrame=2,a._gotoSpriteFrame(a._nextFrame),a.audio[0].load()):a.options.nativeAutoplay?(a.player[0].currentTime=.1,a.playing&&a.pause()):(a.audio[0].load(),a.player.stop()),a.progress.css({width:"0"}),a.playing=!1)})):a.restartOnVisibly=!1})},_handleResizing:function(){var a=this;a.setVideoDimensions(),a.windowResizeTimeout=null,$(window).on("afterwindowresize",function(){a.windowResizeTimeout&&clearTimeout(a.windowResizeTimeout),a.windowResizeTimeout=setTimeout(function(){if(a.setVideoDimensions(),a.options.spritesheetFallback){var b=a.playing;b&&a.pause(!b),a._xpos=0,a._ypos=0,a.progress.css({width:"0"}),a._currentFrame=1,a._nextFrame=2,a._gotoSpriteFrame(a._nextFrame),b&&a.replay(!b)}},250)})},setVideoDimensions:function(){if(this.options.size!==!1){var a=this,b=parseInt(a.options.aspectRatio.split(":")[0],10),c=parseInt(a.options.aspectRatio.split(":")[1],10),d=c/b;$(a.container).css("display","none");var e,f,g,h,i,j=$(a.elem).height(),k=$(a.elem).width();if("contain"==a.options.size)if(j/k>d){var l=$(window).width();e=k>l?l:k,e=e>k||e>l?k:e,a.options.maxSpriteWidth&&a.options.spritesheetFallback&&e>a.options.maxSpriteWidth&&(e=a.options.maxSpriteWidth),f=e*d}else f=j,a.options.maxSpriteHeight&&a.options.spritesheetFallback&&f>a.options.maxSpriteHeight&&(f=a.options.maxSpriteHeight),e=f/d,e=e>k||e>l?k:e;else"cover"==a.options.size?(j/k>d?(f=j,e=j/d,g=((f-j)/2||0)+"px",h=k+"px",i=k/-2+"px"):(e=k,f=e*d,g=(f-j)/2+"px",h=k+"px",i=k/-2+"px"),$(a.container).css({"margin-left":e/-2+"px","margin-top":f/-2+"px"}),a.controls.css({bottom:g,width:h,"margin-left":i})):console.log("no/unrecognized size config",a.options.size);a.frameHeight=f,$(a.canvas).css({height:f+"px",width:e+"px"}),$(a.container).css({height:f+"px",width:e+"px",display:""}),a.options.spritesheetFallback&&!a.options.force_jsmpeg&&(a.options.sprite_width=e*a._sprite_frames_per_row,a.options.sprite_height=f*a._sprite_frames_per_col,a.options.sprite_frame_width=e,a.options.sprite_frame_height=f,a.player.css("background-size",a.options.sprite_width+"px "+a.options.sprite_height+"px")),a.options.nativeAutoplay&&!a.options.force_jsmpeg&&(a.player.attr("width",e),a.player.attr("height",f))}},_makeControls:function(){var a=this,b=a.options.autoplay?"icon-pause":"icon-play",c=a.options.trackingID?a.options.trackingID+"_":"";a.controls=$('<div id="utap_'+c+'controls" class="utap-controls" />'),a.unmuteButton=$('<div id="utap_'+c+'volume_btn" class="utap-volume-btn utap-icon utap-control-bar-buttons icon-volume-high" />'),a.playButton=$('<div id="utap_'+c+'play_btn" class="utap-play-btn utap-icon utap-control-bar-buttons '+b+'" />'),a.unmuteButton.on("click",function(){a.unmute()}),a.progressContainer=$('<div id="utap_'+c+'progress_container" class="utap-progress-container" />'),a.progress=$('<div id="utap_'+c+'progress_bar" class="utap-progress" />'),a.progressContainer.append(a.progress),a.controls.append(a.progressContainer),a.controls.append(a.playButton),a.controls.append(a.unmuteButton),$(a.container).append(a.controls)},unmute:function(){var a=this,b=a.playing;if(a.unmuteButton.css("display","none"),a.playButton.off("click"),a.playButton.on("click",function(){a.pause()}),a.muted)if(a.closeTimeout&&(window.clearTimeout(a.closeTimeout),a.closeTimeout=null),a.muted=!1,a.tracking={},a._setupQuartiles(a.options.nativeAutoplay?a.duration:a.frames),a._trackEvent("replay"),a._triggerEvent("unmute"),a.progress.css({width:"0"}),a.options.spritesheetFallback)a.playing&&(a.pause(!1),a.playing=!1),cancelAnimationFrame(a._loop),a._loop=void 0,a._currentFrame=1,a._nextFrame=2,a._xpos=0,a._ypos=0,a.playedAudio=!0,a.audioCanPlay?(a.audio.one("playing",function(){var c=setInterval(function(){a.audio[0].currentTime>0&&(clearInterval(c),wee=null,a.pause(!b))},16)}),a.audio[0].play()):$(a.elem).one("audioCan",function(){a.audio[0].play(),a.pause(!b)});else if(a.options.nativeAutoplay){a.player[0].muted=!1,a.player[0].volume=a.options.previousVolume||1,a.playedAudio=!0;try{a.player[0].currentTime=.1}catch(c){console.log(c)}a.playing||(a.pause(),a.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"))}else a.player.stop(),a.playedAudio=!0,a.audioCanPlay?(a.audio.one("playing",function(){var b=setInterval(function(){a.audio[0].currentTime>0&&(clearInterval(b),wee=null,a.player.play())},16);a.audio[0].play()}),a.audio[0].play(),a.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),a.playing=!0,a.unmuteCheck=setTimeout(function(){a.player.isPlaying()||(console.log("unmute safety check"),a.pause()),clearTimeout(a.unmuteCheck),a.unmuteCheck=null},4e3)):$(a.elem).one("audioCan",function(){a.player.play(),a.audio[0].play(),a.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),a.playing=!0})},_onframe:function(a,b,c){$(c).css({width:a/b*100+"%"})},_audioCan:function(){this.audioCanPlay=!0,$(this.elem).trigger("audioCan")},replay:function(a){var b=this;b.closeTimeout&&(window.clearTimeout(b.closeTimeout),b.closeTimeout=null),b.playButton.off("click"),!b.options.clickID&&b.canvas?b.canvas.off("click"):b.options.clickID||b.player.off("click"),b.audio&&!b.muted&&(b.audio[0].currentTime=0),b.options.spritesheetFallback?(cancelAnimationFrame(b._loop),b._loop=void 0,b._currentFrame=1,b._nextFrame=2,b._xpos=0,b._ypos=0,b.playing=!1,b.playing||(!b.muted&&b.audioCanPlay?(b.audio.one("playing",function(){var c=setInterval(function(){b.audio[0].currentTime>0&&(clearInterval(c),wee=null,b.playing||b.pause(a))},16)}),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause")):b.muted?b.playing||(b.pause(a),b.playing=!0):b.audioCanPlay?(b.player.play(),b.audio[0].play(),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),b.playing=!0):$(b.elem).one("audioCan",function(){b.player.play(),b.audio[0].play(),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),b.playing=!0}))):b.options.nativeAutoplay||(b.player.stop(),!b.muted&&b.audioCanPlay?(b.audio.one("playing",function(){var a=setInterval(function(){b.audio[0].currentTime>0&&(clearInterval(a),wee=null,b.player.play())},16);b.audio[0].play()}),b.audio[0].play(),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),b.playing=!0,setTimeout(function(){b.player.isPlaying()||b.pause()},4e3)):b.muted?(b.player.play(),b.playing=!0):$(b.elem).one("audioCan",function(){b.player.play(),b.audio[0].play(),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"),b.playing=!0})),b.audio&&!b.muted&&(b.audio[0].load(),b.audio[0].play()),b.options.nativeAutoplay?b.playing||(b.player[0].currentTime=0,b.pause(a)):b.options.spritesheetFallback||(b.player.stop(),b.player.play()),a!==!1&&b._trackEvent("videoreplay"),b._triggerEvent("replay"),b._bindPlayToggle(),b.playButton.removeClass("icon-replay").addClass("icon-pause")},_rightNow:function(){return window.performance&&window.performance.now?window.performance.now():+new Date},pause:function(a){var b=this;b.playing?(b.playing=!1,b.options.spritesheetFallback?(cancelAnimationFrame(b._loop),b._loop=void 0):b.options.nativeAutoplay?b.player[0].pause():b.player.pause(),b.playedAudio&&b.audio&&b.audio[0].pause(),a!==!1&&b._trackEvent("pause"),b.unmuteCheck&&(clearTimeout(b.unmuteCheck),b.unmuteCheck=null),b._triggerEvent("pause"),b.playButton.removeClass("icon-pause").removeClass("icon-replay").addClass("icon-play")):(b.playing=!0,b.options.spritesheetFallback?(b._currentTime=b._rightNow(),b._loop=requestAnimationFrame(b._spriteloop.bind(b))):b.options.nativeAutoplay?b.player[0].play():b.player.play(),b.playedAudio&&b.audio&&b.audio[0].play(),b.hasPlayed&&a!==!1?b._trackEvent("resume"):b.hasPlayed=!0,b._triggerEvent("play"),b.playButton.removeClass("icon-play").removeClass("icon-replay").addClass("icon-pause"))},play:self.pause};var pfoc=function(){Object.create=function(a){function b(){}return b.prototype=a,new b}};$.fn.autoplay=function(a){return"function"!=typeof Object.create&&pfoc(),this.each(function(){var b=Object.create(Autoplay);b.init(a,this);var c=$(this),d=c.data("autoplay");d||c.data("autoplay",b)})};